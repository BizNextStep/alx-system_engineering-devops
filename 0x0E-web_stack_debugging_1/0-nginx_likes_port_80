#!/usr/bin/env bash

# Start Nginx
systemctl start nginx

# Check if Nginx is listening on port 80
if ! netstat -tuln | grep :80 > /dev/null; then
  # Restart Nginx
  systemctl restart nginx

  # Check if Nginx is listening on port 80
  if ! netstat -tuln | grep :80 > /dev/null; then
    # Check the Nginx configuration files
    if nginx -t > /dev/null; then
      # Restart Nginx
      systemctl restart nginx

      # Check if Nginx is listening on port 80
      if ! netstat -tuln | grep :80 > /dev/null; then
        # Check the Nginx error logs
        if [ -s /var/log/nginx/error.log ]; then
          tail -n 100 /var/log/nginx/error.log
        else
          echo "No error logs found."
        fi
      fi
    else
      # Check the Nginx configuration files
      nginx -t
    fi
  fi
fi

